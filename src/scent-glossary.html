---
layout: layout
title: Scent Glossary
---

<header class="relative w-full h-80 bg-cover bg-center" style="background-image: url('/src/candles-header.webp');">
    <div class="absolute inset-0 bg-charcoal/40 flex items-center justify-center">
        <h1 id="glossary-header-title" class="font-playfair text-6xl font-extrabold text-parchment drop-shadow-lg">Scent Glossary</h1>
    </div>
</header>

<main class="container mx-auto p-4 lg:p-8 py-16">

    <div id="loading-state" class="text-center p-12 bg-parchment rounded-xl shadow-lg border border-stone/10">
        <p class="font-playfair text-2xl text-stone">Loading the world of fragrance notes...</p>
        <div class="mt-4 animate-spin rounded-full h-8 w-8 border-b-2 border-burnt-orange mx-auto"></div>
    </div>

    <section id="glossary-section" class="max-w-4xl mx-auto hidden">
        
        <div id="glossary-content" class="prose max-w-none text-stone font-roboto space-y-8">
            <p>Content loading error: Default text displayed.</p>
        </div>
        
        <div class="mt-12 text-center">
            <h3 class="font-playfair text-3xl font-bold text-charcoal mb-4">Still need help finding a scent?</h3>
            <a href="/scent-quiz/" class="inline-block py-3 px-8 bg-burnt-orange text-parchment font-bold rounded-lg shadow-md hover:bg-amber-700 transition duration-150">
                Take the Scent Quiz
            </a>
        </div>
    </section>

</main>

<script type="module">
    // FIX: Corrected import path to include /src/ directory
    import { db, doc, getDoc } from '/src/firebase-loader.js'; 

    // --- DOM Elements ---
    const loadingState = document.getElementById('loading-state');
    const glossarySection = document.getElementById('glossary-section');
    const glossaryHeaderTitle = document.getElementById('glossary-header-title');
    const glossaryContent = document.getElementById('glossary-content');

    /**
     * Loads dynamic content for the Scent Glossary page from Firestore.
     */
    async function loadGlossaryContent() {
        console.log("Scent Glossary Page: Loading content from Firestore...");
        
        // Ensure loading state is visible initially
        loadingState.classList.remove('hidden');
        glossarySection.classList.add('hidden');

        try {
            // Document reference for the 'scent-glossary' page content
            // CRITICAL FIX: The CMS document name is 'scent-glossary' based on other CMS files.
            const docRef = doc(db, "siteContent", "scent-glossary");
            const docSnap = await getDoc(docRef);

            if (docSnap.exists()) {
                const data = docSnap.data();
                
                // 1. Header Title (Assumed field based on other pages)
                glossaryHeaderTitle.textContent = data.glossaryHeaderTitle || "Scent Glossary";
                
                // 2. Glossary Content (Assumed to be rich HTML/Markdown converted content)
                glossaryContent.innerHTML = data.glossaryContent || "<p>Glossary content not set in Firestore. Please update the admin panel.</p>";
                
                // Success: Hide loading, show content
                loadingState.classList.add('hidden');
                glossarySection.classList.remove('hidden');

            } else {
                console.warn("Scent Glossary Page: Document 'siteContent/scent-glossary' does not exist.");
                loadingState.innerHTML = `<p class="font-playfair text-2xl text-red-600">Error: Glossary configuration document not found.</p>`;
            }
        } catch (error) {
            console.error("Error fetching Scent Glossary content:", error);
            loadingState.innerHTML = `<p class="font-playfair text-2xl text-red-600">Error loading content: ${error.message}</p>`;
        }
    }

    document.addEventListener('DOMContentLoaded', loadGlossaryContent);
</script>