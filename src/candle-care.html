---
layout: layout
title: Candle Care
---

<script type="module">
    import { db, doc, getDoc } from '/firebase-loader.js';

    // --- DOM Elements ---
    const contentLoader = document.getElementById('content-loader');
    const careContent = document.getElementById('care-content');
    const introSection = document.getElementById('intro-section');
    const coreTipsContainer = document.getElementById('core-tips-container');
    const safetyHeading = document.getElementById('safety-heading');
    const safetyContent = document.getElementById('safety-content');
    
    // Structure of the core tips for dynamic injection
    const TIP_ELEMENT_IDS = [
        { heading: 'tip1Heading', text: 'tip1Text' },
        { heading: 'tip2Heading', text: 'tip2Text' },
        { heading: 'tip3Heading', text: 'tip3Text' },
        { heading: 'tip4Heading', text: 'tip4Text' }
    ];

    /**
     * Fetches the 'candleCare' document from Firestore and injects content into the page.
     */
    async function loadCandleCareContent() {
        // Show loader while fetching
        contentLoader.classList.remove('hidden');
        careContent.classList.add('hidden');

        try {
            const careRef = doc(db, 'siteContent', 'candleCare');
            const docSnap = await getDoc(careRef);

            if (docSnap.exists()) {
                const data = docSnap.data();

                // 1. Inject Introduction (Main Heading and Intro)
                introSection.innerHTML = `
                    <h1 class="text-5xl font-playfair text-charcoal mb-4">${data.heading || 'Candle Care 101'}</h1>
                    <div class="text-lg text-stone leading-relaxed">${data.careIntro || '<p>Content missing: Intro paragraph.</p>'}</div>
                `;

                // 2. Inject Core Tips
                let coreTipsHtml = `
                    <h2 class="text-4xl font-playfair text-charcoal mb-8 text-center">${data.coreTipsTitle || 'Core Care Tips'}</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                `;

                TIP_ELEMENT_IDS.forEach((tip, index) => {
                    const tipHeading = data[tip.heading] || `Tip ${index + 1} Heading`;
                    const tipText = data[tip.text] || 'Tip content is missing. Update via Admin CMS.';

                    coreTipsHtml += `
                        <div class="p-6 bg-parchment rounded-lg shadow-md border-l-4 border-burnt-orange">
                            <h3 class="text-2xl font-playfair text-charcoal mb-2">${tipHeading}</h3>
                            <p class="text-stone leading-relaxed">${tipText}</p>
                        </div>
                    `;
                });

                coreTipsHtml += `</div>`;
                coreTipsContainer.innerHTML = coreTipsHtml;


                // 3. Inject Safety Warnings
                safetyHeading.textContent = data.safetyTitle || 'Crucial Safety Warnings';
                // Use innerHTML for safety content as it's typically an un-ordered list (<ul>)
                safetyContent.innerHTML = data.safetyContent || '<ul><li class="text-red-600">Safety content is missing. Please ensure safety warnings are populated via the Admin CMS.</li></ul>';
                
            } else {
                // Document not found
                introSection.innerHTML = '<h1 class="text-5xl font-playfair text-charcoal">Content Missing</h1>';
                coreTipsContainer.innerHTML = '<p class="text-red-600 mt-4">The core "candleCare" document could not be found in the database. Please check Firestore.</p>';
                safetyHeading.textContent = 'Safety Warnings';
                safetyContent.innerHTML = '';
            }

        } catch (error) {
            console.error("Error loading Candle Care content:", error);
            introSection.innerHTML = '<h1 class="text-5xl font-playfair text-charcoal">Error Loading Page</h1>';
            coreTipsContainer.innerHTML = '<p class="text-red-600 mt-4">A network error occurred while fetching content. Please try again later.</p>';
        } finally {
            // Hide loader and show content
            contentLoader.classList.add('hidden');
            careContent.classList.remove('hidden');
        }
    }

    document.addEventListener('DOMContentLoaded', loadCandleCareContent);

</script>

<main class="container mx-auto px-4 py-12 min-h-screen">
    
    <div id="content-loader" class="flex justify-center items-center h-64">
        <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-charcoal"></div>
    </div>

    <div id="care-content" class="hidden">
        
        <div id="intro-section" class="max-w-3xl mx-auto text-center mb-12">
            </div>

        <section class="mb-16" id="core-tips-container">
            </section>

        <section class="max-w-2xl mx-auto p-8 bg-white rounded-lg shadow-xl border-t-4 border-red-600">
            <h2 id="safety-heading" class="text-3xl font-playfair text-red-600 mb-6 text-center">
                Crucial Safety Warnings
            </h2>
            <div id="safety-content" class="text-lg text-stone space-y-3 list-disc list-inside">
                </div>
        </section>

        <div class="mt-16 text-center">
            <p class="text-sm font-semibold uppercase tracking-wider text-stone">VISUAL GUIDE COMING SOON</p>
        </div>
    </div>
</main>