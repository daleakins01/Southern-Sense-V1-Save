<header class="bg-parchment shadow-md sticky top-0 z-50">
    <div class="container mx-auto p-4 flex justify-between items-center">
        <a href="/" class="flex items-center space-x-2">
            <img src="/logo.webp" alt="Southern Sense Logo" class="h-10 w-auto">
            <span class="hidden sm:inline font-playfair text-2xl font-bold text-charcoal">Southern Sense</span>
        </a>

        <nav class="hidden lg:flex space-x-6 items-center">
            
            <div class="relative group">
                <a href="/shop/" class="nav-link flex items-center" id="shop-dropdown-toggle">
                    Shop 
                    <i class="fas fa-chevron-down text-xs ml-1 transition-transform duration-200"></i>
                </a>
                <div id="shop-dropdown-menu" class="absolute left-1/2 transform -translate-x-1/2 mt-0 w-64 bg-white rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 pointer-events-none group-hover:pointer-events-auto border border-stone/10">
                    <div class="p-4 space-y-3">
                        <a href="/shop/" class="block font-playfair text-lg font-bold text-charcoal hover:text-burnt-orange transition-colors">All Products</a>
                        <hr class="border-stone/20">
                        <h4 class="font-roboto text-xs uppercase tracking-wider text-stone mb-2">Shop by Scent Family</h4>
                        <div id="scent-family-links" class="space-y-1">
                            <p class="text-sm font-roboto text-stone/80">Loading...</p>
                        </div>
                    </div>
                </div>
            </div>

            <a href="/scent-quiz/" class="nav-link">Scent Quiz</a>
            <a href="/subscriptions/" class="nav-link">Subscriptions</a>
            <a href="/gifting/" class="nav-link font-bold text-burnt-orange border-b-2 border-burnt-orange">Gifting</a>
            <a href="/refill-program/" class="nav-link">Refill Program</a>
            <a href="/about/" class="nav-link">Our Story</a>
            <a href="/contact/" class="nav-link">Contact</a>
        </nav>

        <div class="flex items-center space-x-4">
            <div id="auth-links" class="flex items-center space-x-4">
                <a href="/login/" id="login-link" class="text-charcoal hover:text-burnt-orange transition-colors duration-150">
                    <i class="fas fa-user-circle text-2xl"></i>
                </a>
                <a href="/account/" id="account-link" class="hidden text-charcoal hover:text-burnt-orange transition-colors duration-150">
                    <i class="fas fa-user-circle text-2xl"></i>
                </a>
            </div>

            <a href="/cart/" class="relative text-charcoal hover:text-burnt-orange transition-colors duration-150">
                <i class="fas fa-shopping-cart text-2xl"></i>
                <span id="cart-count" class="absolute -top-1 -right-2 bg-burnt-orange text-parchment text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">
                    0
                </span>
            </a>

            <button id="mobile-menu-button" class="lg:hidden text-charcoal hover:text-burnt-orange transition-colors duration-150">
                <i class="fas fa-bars text-2xl"></i>
            </button>
        </div>
    </div>

    <div id="mobile-menu" class="hidden lg:hidden absolute top-full left-0 w-full bg-parchment shadow-xl border-t border-stone/10 p-4 space-y-3">
        <a href="/shop/" class="mobile-nav-link">Shop</a>
        <a href="/scent-quiz/" class="mobile-nav-link">Scent Quiz</a>
        <a href="/subscriptions/" class="mobile-nav-link">Subscriptions</a>
        <a href="/gifting/" class="mobile-nav-link font-bold text-burnt-orange">Gifting</a>
        <a href="/refill-program/" class="mobile-nav-link">Refill Program</a>
        <a href="/about/" class="mobile-nav-link">Our Story</a>
        <a href="/contact/" class="mobile-nav-link">Contact</a>
        <hr class="border-stone/20">
        <a href="/account/" id="mobile-account-link" class="mobile-nav-link">My Account</a>
        <a href="/login/" id="mobile-login-link" class="mobile-nav-link">Login</a>
    </div>
</header>

<script>
    // Styles for the navigation links
    const navLinkStyle = "font-roboto text-charcoal hover:text-burnt-orange transition-colors duration-150";
    document.querySelectorAll('.nav-link').forEach(link => link.className += ' ' + navLinkStyle);
    
    const mobileNavLinkStyle = "block font-roboto text-charcoal text-lg p-2 hover:bg-stone/10 rounded transition-colors duration-150";
    document.querySelectorAll('.mobile-nav-link').forEach(link => link.className += ' ' + mobileNavLinkStyle);

    // Mobile Menu Toggle Logic
    const menuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    menuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
    });

    // Cleanup for links that might have inherited bolding
    document.querySelectorAll('a').forEach(link => {
         if (link.href.includes('/subscriptions/') || link.href.includes('/scent-quiz/')) {
            link.classList.remove('font-bold', 'text-burnt-orange', 'border-b-2', 'border-burnt-orange');
         }
    });

    // NOTE: Real-time cart count and auth links are handled by main.js
</script>