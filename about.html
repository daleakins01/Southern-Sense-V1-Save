<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Learn the story behind Southern Sense and our commitment to quality ingredients, including all-natural Coco Apricot Wax and clean, rich fragrance oils.">
    <title>About Us - Southern Sense</title>
    
    <!-- === PERFORMANCE OPTIMIZATION (START) === -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@400;500&family=Great+Vibes&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@400;500&family=Great+Vibes&display=swap" rel="stylesheet"></noscript>
    <link href="output.css" rel="stylesheet">
    <!-- === PERFORMANCE OPTIMIZATION (END) === -->

    <!-- Firebase -->
    <script src="firebase-loader.js" type="module"></script>
    <!-- Add Cart Logic -->
    <script src="cart.js" type="module"></script> 
    
    <!-- === START FIX === -->
    <!-- Added auth.js here to ensure reliable loading -->
    <script src="auth.js" type="module"></script>
    <!-- === END FIX === -->
    
    <!-- Shared Header/Footer -->
    <!-- MODIFICATION: Changed 'defer' to 'type="module"' because main.js now uses imports -->
    <script src="main.js" type="module"></script>
</head>
<body class="font-roboto text-charcoal bg-parchment" style="background-image: url('background-parchment.webp'); background-attachment: fixed; background-size: cover;">

    <!-- Header: Injected by main.js -->
    <div id="header-placeholder"></div>

    <!-- Main Content -->
    <main class="py-12 sm:py-24">
        <div class="container mx-auto px-4">
            <div class="content-wrapper max-w-4xl mx-auto p-8 sm:p-12 rounded-lg shadow-2xl">

                <!-- Page Title -->
                <div class="text-center mb-10">
                    <h1 id="about-title" class="font-playfair text-4xl sm:text-5xl font-bold text-charcoal">From Passion to Palm Wax</h1>
                    <p class="font-southern text-4xl text-burnt-orange -mt-2">Our Story</p>
                </div>

                <!-- Dynamic Content Error Message -->
                <div id="content-error" class="hidden bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded" role="alert">
                    <p class="font-bold">Error Loading Content</p>
                    <p>There was an issue fetching the latest content. Displaying default text.</p>
                </div>

                <!-- Main Content Body -->
                <div class="md:grid md:grid-cols-3 md:gap-12 flex flex-col items-center">
                    
                    <!-- Portrait -->
                    <div class="md:col-span-1 flex justify-center mb-8 md:mb-0">
                        <img src="paula-bryan-portrait.webp" 
                             alt="Portrait of Paula Bryan, founder of Southern Sense" 
                             class="rounded-lg shadow-xl w-64 md:w-80 h-auto"
                             onerror="this.src='https://placehold.co/320x400/FBF9F6/3D352E?text=Paula+Bryan'; this.onerror=null;">
                    </div>

                    <!-- Text Content -->
                    <div class="md:col-span-2 text-stone text-lg leading-relaxed space-y-6">
                        <p id="about-p1">Welcome to Southern Sense, where every fragrance tells a story. My name is Paula Bryan, and my journey into the world of candle making began not in a workshop, but in my own home, driven by a desire for scents that were both luxurious and pure. What started as a personal quest for the perfect, clean-burning candle has blossomed into a full-time passion for crafting high-quality, eco-conscious aromas for you to enjoy.</p>
                        
                        <p id="about-p2">We are committed to quality you can feel good about. Our candles are hand-poured in small batches using all-natural Coco Apricot Wax, which provides a clean, slow burn and an excellent scent throw. We pair this with premium, clean-scented fragrance oils and natural wooden wicks. Our wax melts are made with the same care, ensuring a rich, consistent aroma. This is more than a business; it's a craft, and we're thrilled to share a piece of our southern passion with you.</p>
                    </div>
                </div>

                <!-- Quality Icons Section -->
                <div class="mt-16 pt-12 border-t border-stone/20">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-10 text-center">
                        
                        <!-- Icon 1: Wax -->
                        <div class="flex flex-col items-center">
                            <img src="finest-wax.webp" alt="All-natural coco apricot wax" class="h-24 w-24 object-contain"
                                 onerror="this.src='https://placehold.co/100x100/FBF9F6/3D352E?text=Wax'; this.onerror=null;">
                            <h3 class="font-playfair text-xl font-bold text-charcoal mt-4">The Finest Wax</h3>
                            <p class="text-stone mt-2">We use an all-natural, vegan blend of Coco Apricot Wax for a clean, slow, and eco-friendly burn.</p>
                        </div>

                        <!-- Icon 2: Oils -->
                        <div class="flex flex-col items-center">
                            <img src="clean-oils.webp" alt="Clean, premium fragrance oils" class="h-24 w-24 object-contain"
                                 onerror="this.src='https://placehold.co/100x100/FBF9F6/3D352E?text=Oils'; this.onerror=null;">
                            <h3 class="font-playfair text-xl font-bold text-charcoal mt-4">Clean, Rich Oils</h3>
                            <p class="text-stone mt-2">All our fragrances are 100% phthalate-free, non-toxic, and free from carcinogens and reproductive toxins.</p>
                        </div>
                        
                        <!-- Icon 3: Hand-Poured -->
                        <div class="flex flex-col items-center">
                            <svg class="h-24 w-24 text-burnt-orange" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 17.25l4.5-4.5m-4.5 0l4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7C14.453 4.046 13.232 4 12 4s-2.453.046-3.662.138a4.006 4.006 0 00-3.7 3.7C4.046 9.547 4 10.768 4 12s.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7c1.209.092 2.43.138 3.662.138s2.453-.046 3.662-.138a4.006 4.006 0 003.7-3.7c.092-1.209.138-2.43.138-3.662z" />
                              </svg>
                            <h3 class="font-playfair text-xl font-bold text-charcoal mt-4">Hand-Poured With Care</h3>
                            <p class="text-stone mt-2">Every item is poured, labeled, and packaged by hand in small batches to ensure the highest quality.</p>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </main>
    
    <!-- Footer: Injected by main.js -->
    <div id="footer-placeholder"></div>

    <!-- === JAVASCRIPT FOR DYNAMIC CONTENT === -->
    <script type="module">
        import { db } from './firebase-loader.js';
        import { doc, getDoc } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js";

        // Function to load content from 'siteContent/about'
        async function loadAboutContent() {
             console.log("DEBUG: About.html - 'ui-ready' received, loading content...");
             const titleEl = document.getElementById('about-title');
             const p1El = document.getElementById('about-p1');
             const p2El = document.getElementById('about-p2');
             const errorEl = document.getElementById('content-error');

             if (!titleEl || !p1El || !p2El || !errorEl) {
                 console.error("About.html Error: Could not find necessary HTML elements.");
                 return;
             }
             errorEl.classList.add('hidden'); 

            try {
                const docRef = doc(db, "siteContent", "about");
                const docSnap = await getDoc(docRef);

                if (docSnap.exists()) {
                    const data = docSnap.data();
                    // Only update text if data.aboutTitle is not null/undefined/empty string
                    if(data && data.aboutTitle) titleEl.textContent = data.aboutTitle;
                    if(data && data.aboutParagraph1) p1El.textContent = data.aboutParagraph1;
                    if(data && data.aboutParagraph2) p2El.textContent = data.aboutParagraph2;
                } else {
                    console.warn("About.html Warning: Document siteContent/about does NOT exist."); 
                }
            } catch (error) {
                console.error("Error fetching 'about' content:", error); 
                errorEl.textContent = `Error loading content: ${error.message}`; 
                errorEl.classList.remove('hidden'); 
            }
        }

        // Wait for main.js 'ui-ready' event
        // FIXED: Re-enabled this line to fetch content from Firebase as requested.
        document.addEventListener('ui-ready', loadAboutContent, { once: true });

    </script>

</body>
</html>

