---
layout: layout.html
title: Contact Us
---

<header class="relative w-full h-80 bg-cover bg-center" style="background-image: url('/src/candles-header.webp');">
    <div class="absolute inset-0 bg-charcoal/40 flex items-center justify-center">
        <h1 class="font-playfair text-6xl font-extrabold text-parchment drop-shadow-lg">Get in Touch</h1>
    </div>
</header>

<main class="container mx-auto p-4 lg:p-8 py-16">
    <div class="max-w-5xl mx-auto grid md:grid-cols-2 gap-12">
        
        <div class="bg-parchment p-8 rounded-xl shadow-2xl border border-stone/10">
            <h2 class="font-playfair text-3xl font-bold text-charcoal mb-6">Send Us a Message</h2>
            
            <p id="form-status" class="hidden font-roboto text-sm p-3 rounded-lg mb-4"></p>

            <form id="contact-form" class="space-y-4">
                <div>
                    <label for="contact-name" class="block font-roboto text-sm font-medium text-charcoal">Your Name</label>
                    <input type="text" id="contact-name" name="name" required class="w-full p-2 border border-stone/30 rounded-lg focus:ring-burnt-orange focus:border-burnt-orange">
                </div>
                <div>
                    <label for="contact-email" class="block font-roboto text-sm font-medium text-charcoal">Email Address</label>
                    <input type="email" id="contact-email" name="email" required class="w-full p-2 border border-stone/30 rounded-lg focus:ring-burnt-orange focus:border-burnt-orange">
                </div>
                <div>
                    <label for="contact-subject" class="block font-roboto text-sm font-medium text-charcoal">Subject</label>
                    <select id="contact-subject" name="subject" required class="w-full p-2 border border-stone/30 rounded-lg focus:ring-burnt-orange focus:border-burnt-orange">
                        <option value="">-- Select a subject --</option>
                        <option value="General Inquiry">General Inquiry</option>
                        <option value="Order Issue">Order Issue / Status Update</option>
                        <option value="Product Feedback">Product Feedback</option>
                        <option value="Wholesale Inquiry">Wholesale Inquiry</option>
                    </select>
                </div>
                <div>
                    <label for="contact-message" class="block font-roboto text-sm font-medium text-charcoal">Message</label>
                    <textarea id="contact-message" name="message" rows="5" required class="w-full p-2 border border-stone/30 rounded-lg focus:ring-burnt-orange focus:border-burnt-orange"></textarea>
                </div>
                
                <button type="submit" id="submit-button" class="w-full py-3 bg-burnt-orange text-parchment font-playfair text-lg font-bold rounded-lg shadow-md hover:bg-opacity-90 transition duration-150">
                    Send Message
                </button>
            </form>
        </div>
        
        <div class="space-y-8">
            <div class="bg-white p-6 rounded-xl shadow-lg border border-stone/10 space-y-4">
                <h3 class="font-playfair text-2xl font-bold text-charcoal">Direct Contact</h3>
                <p class="text-stone">
                    For immediate questions about an existing order or quick queries, please use the direct email below.
                </p>
                <ul class="space-y-2">
                    <li class="font-roboto text-sm"><strong class="font-bold text-charcoal">Customer Service:</strong> <a href="mailto:support@southernsense.org" class="text-burnt-orange hover:underline">support@southernsense.org</a></li>
                    <li class="font-roboto text-sm"><strong class="font-bold text-charcoal">Wholesale:</strong> <a href="mailto:wholesale@southernsense.org" class="text-burnt-orange hover:underline">wholesale@southernsense.org</a></li>
                </ul>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-lg border border-stone/10 space-y-4">
                <h3 class="font-playfair text-2xl font-bold text-charcoal">Business Hours</h3>
                <p class="text-stone">Our team is available to assist you during the following hours:</p>
                <ul class="font-roboto text-sm space-y-1">
                    <li>Monday - Friday: 9:00 AM - 5:00 PM (EST)</li>
                    <li>Weekends & Holidays: Closed</li>
                </ul>
            </div>
            
        </div>
    </div>
</main>

<script type="module">
    // FIX: Corrected import path to include /src/ directory
    import { db, collection, addDoc, Timestamp } from '/src/firebase-loader.js'; 

    const contactForm = document.getElementById('contact-form');
    const formStatus = document.getElementById('form-status');
    const submitButton = document.getElementById('submit-button');
    const originalButtonText = submitButton.textContent;

    if (contactForm) {
        contactForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            // Set loading state
            submitButton.disabled = true;
            submitButton.textContent = 'Sending...';
            formStatus.classList.remove('hidden');
            formStatus.className = 'font-roboto text-sm p-3 rounded-lg bg-yellow-100 text-yellow-700 block mb-4';
            formStatus.textContent = 'Submitting your message to the server...';

            const name = document.getElementById('contact-name').value;
            const email = document.getElementById('contact-email').value;
            const subject = document.getElementById('contact-subject').value;
            const message = document.getElementById('contact-message').value;

            try {
                // Save the message to the 'contactMessages' collection in Firestore
                await addDoc(collection(db, "contactMessages"), {
                    name: name,
                    email: email,
                    subject: subject,
                    message: message,
                    // Use Firestore's server timestamp for the creation date
                    receivedAt: Timestamp.now(), 
                    // Add a default 'resolved' status for admin tracking
                    resolved: false
                });

                // Success state
                formStatus.textContent = 'Success! Your message has been sent. We will respond within 24-48 hours.';
                formStatus.className = 'font-roboto text-sm p-3 rounded-lg bg-green-100 text-green-700 block mb-4';
                
                // Clear the form fields upon successful submission
                contactForm.reset();

                // Redirect to a success page for better tracking/UX
                setTimeout(() => {
                    window.location.href = '/message-sent/'; 
                }, 1000);

            } catch (error) {
                console.error("Error submitting contact form:", error);

                // Error state
                formStatus.textContent = `Error sending message: ${error.message}. Please try again later or email us directly.`;
                formStatus.className = 'font-roboto text-sm p-3 rounded-lg bg-red-100 text-red-700 block mb-4';
            } finally {
                // Reset button after error or success (if no redirect)
                if (window.location.pathname.indexOf('/message-sent/') === -1) {
                    submitButton.disabled = false;
                    submitButton.textContent = originalButtonText;
                }
            }
        });
    }
</script>