---
layout: layout.html
title: Refill Program
---

<header class="relative w-full h-80 bg-cover bg-center" style="background-image: url('/src/candles-header.webp');">
    <div class="absolute inset-0 bg-charcoal/40 flex items-center justify-center">
        <h1 id="header-title" class="font-playfair text-6xl font-extrabold text-parchment drop-shadow-lg">Refill Program</h1>
    </div>
</header>

<main class="container mx-auto p-4 lg:p-8 py-16">

    <section class="max-w-4xl mx-auto mb-16">
        <h2 class="font-playfair text-4xl font-bold text-charcoal text-center mb-6">Sustainable Scents</h2>
        <div id="refill-content" class="prose max-w-none text-stone font-roboto text-lg text-center mx-auto">
            <p>Loading program overview...</p>
        </div>
    </section>

    <section class="mb-16">
        <h2 id="how-it-works-title" class="font-playfair text-4xl font-bold text-charcoal text-center mb-10">How It Works</h2>
        <div class="max-w-4xl mx-auto grid md:grid-cols-5 gap-8">
            <div class="col-span-1 text-center space-y-2">
                <div class="w-12 h-12 flex items-center justify-center rounded-full bg-burnt-orange text-parchment font-bold text-xl mx-auto mb-3">1</div>
                <p id="refill-step-1" class="text-stone">Loading step 1...</p>
            </div>
            <div class="hidden md:flex items-center justify-center text-burnt-orange text-2xl font-bold">
                &rarr;
            </div>
            <div class="col-span-1 text-center space-y-2">
                <div class="w-12 h-12 flex items-center justify-center rounded-full bg-burnt-orange text-parchment font-bold text-xl mx-auto mb-3">2</div>
                <p id="refill-step-2" class="text-stone">Loading step 2...</p>
            </div>
            <div class="hidden md:flex items-center justify-center text-burnt-orange text-2xl font-bold">
                &rarr;
            </div>
            <div class="col-span-1 text-center space-y-2">
                <div class="w-12 h-12 flex items-center justify-center rounded-full bg-burnt-orange text-parchment font-bold text-xl mx-auto mb-3">3</div>
                <p id="refill-step-3" class="text-stone">Loading step 3...</p>
            </div>
             </div>

        <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-8 mt-12">
            <div class="text-center space-y-2 border-t pt-6 border-stone/10">
                <div class="w-12 h-12 flex items-center justify-center rounded-full bg-burnt-orange text-parchment font-bold text-xl mx-auto mb-3">4</div>
                <p id="refill-step-4" class="text-stone">Loading step 4...</p>
            </div>
            <div class="text-center space-y-2 border-t pt-6 border-stone/10">
                <div class="w-12 h-12 flex items-center justify-center rounded-full bg-burnt-orange text-parchment font-bold text-xl mx-auto mb-3">5</div>
                <p id="refill-step-5" class="text-stone">Loading step 5...</p>
            </div>
        </div>
    </section>

    <section class="max-w-5xl mx-auto bg-parchment p-8 rounded-xl shadow-2xl border border-stone/10">
        <h2 id="pricing-title" class="font-playfair text-4xl font-bold text-charcoal text-center mb-8">Refill Pricing Structure</h2>
        <div class="grid md:grid-cols-3 gap-8 text-center">
            
            <div class="p-4 border-r md:border-r-0 md:border-b-0 border-stone/20">
                <h3 class="text-2xl font-playfair font-bold text-burnt-orange mb-2">1 Refill</h3>
                <p id="refill-price-1" class="text-stone text-lg">Loading price 1...</p>
            </div>

            <div class="p-4 border-r md:border-r-0 md:border-b-0 border-stone/20">
                <h3 class="text-2xl font-playfair font-bold text-burnt-orange mb-2">2 Refills</h3>
                <p id="refill-price-2" class="text-stone text-lg">Loading price 2...</p>
            </div>

            <div class="p-4">
                <h3 class="text-2xl font-playfair font-bold text-burnt-orange mb-2">3+ Refills</h3>
                <p id="refill-price-3" class="text-stone text-lg">Loading price 3...</p>
            </div>
        </div>
        
        <h3 id="policies-title" class="font-playfair text-3xl font-bold text-charcoal text-center mt-12 mb-6">Important Policies</h3>
        <ul class="list-disc list-inside space-y-3 max-w-2xl mx-auto text-stone">
            <li id="refill-policy-1">Loading policy 1...</li>
            <li id="refill-policy-2">Loading policy 2...</li>
        </ul>
    </section>

</main>

<script type="module">
    // FIX: Corrected import path to include /src/ directory
    import { db, doc, getDoc } from '/src/firebase-loader.js'; 

    /**
     * Loads dynamic content for the Refill Program page from Firestore.
     */
    async function loadRefillContent() {
        console.log("Refill Program Page: Loading content from Firestore...");
        try {
            // Document reference for the 'refill-program' page content
            const docRef = doc(db, "siteContent", "refill-program");
            const docSnap = await getDoc(docRef);

            if (docSnap.exists()) {
                const data = docSnap.data();
                
                // 1. Header Title
                document.getElementById('header-title').textContent = data.refillHeaderTitle || "Refill Program";
                
                // 2. Overview Content (HTML)
                document.getElementById('refill-content').innerHTML = data.refillContent || "<p class='text-center'>Program overview not set in Firestore.</p>";
                
                // 3. How It Works Steps
                document.getElementById('how-it-works-title').textContent = data.refillHowItWorksTitle || "How It Works";
                document.getElementById('refill-step-1').textContent = data.refillStep1Text || "Step 1 not found.";
                document.getElementById('refill-step-2').textContent = data.refillStep2Text || "Step 2 not found.";
                document.getElementById('refill-step-3').textContent = data.refillStep3Text || "Step 3 not found.";
                document.getElementById('refill-step-4').textContent = data.refillStep4Text || "Step 4 not found.";
                document.getElementById('refill-step-5').textContent = data.refillStep5Text || "Step 5 not found.";
                
                // 4. Pricing
                document.getElementById('pricing-title').textContent = data.refillPriceTitle || "Pricing";
                document.getElementById('refill-price-1').textContent = data.refillPrice1Text || "Price 1 not found.";
                document.getElementById('refill-price-2').textContent = data.refillPrice2Text || "Price 2 not found.";
                document.getElementById('refill-price-3').textContent = data.refillPrice3Text || "Price 3 not found.";

                // 5. Policies
                document.getElementById('policies-title').textContent = data.refillPoliciesTitle || "Policies";
                document.getElementById('refill-policy-1').textContent = data.refillPolicy1Text || "Policy 1 not found.";
                document.getElementById('refill-policy-2').textContent = data.refillPolicy2Text || "Policy 2 not found.";

            } else {
                console.warn("Refill Program Page: Document 'siteContent/refill-program' does not exist.");
                document.getElementById('refill-content').innerHTML = `<p class="text-red-600 text-center">Error: Could not load Refill Program configuration.</p>`;
            }
        } catch (error) {
            console.error("Error fetching Refill Program content:", error);
            document.getElementById('refill-content').innerHTML = `<p class="text-red-600 text-center">Error loading content: ${error.message}</p>`;
        }
    }

    document.addEventListener('DOMContentLoaded', loadRefillContent);
</script>