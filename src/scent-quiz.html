---
layout: layout
title: Scent Quiz
---

<script type="module">
    // The quiz logic runs purely client-side; no Firestore import needed here.

    // --- DOM Elements ---
    const quizContainer = document.getElementById('quiz-container');
    const questionContainer = document.getElementById('question-container');
    const resultContainer = document.getElementById('result-container');
    const resultHeading = document.getElementById('result-heading');
    const resultDescription = document.getElementById('result-description');
    const resultLink = document.getElementById('result-link');
    const progressText = document.getElementById('progress-text');

    // --- Quiz State ---
    let currentQuestionIndex = 0;
    // Score tracks votes for each scent family
    const score = {
        'fresh-clean': 0,
        'woody-earthy': 0,
        'spicy-warm': 0,
        'fruity-sweet': 0,
        'floral-herbal': 0
    };

    // --- Quiz Data ---
    const quizData = [
        {
            question: "What environment do you find most relaxing?",
            options: [
                { text: "A freshly cleaned home after a long day.", family: 'fresh-clean' },
                { text: "A cabin deep in a quiet forest.", family: 'woody-earthy' },
                { text: "A warm kitchen on a cool, holiday morning.", family: 'spicy-warm' },
                { text: "A flower market on a warm spring day.", family: 'floral-herbal' }
            ]
        },
        {
            question: "Which drink is your comfort classic?",
            options: [
                { text: "A simple glass of iced water or a clear spirit.", family: 'fresh-clean' },
                { text: "A dark coffee or a rich, aged whiskey.", family: 'woody-earthy' },
                { text: "Spiced chai or mulled wine.", family: 'spicy-warm' },
                { text: "Sweet lemonade or a vibrant fruity cocktail.", family: 'fruity-sweet' }
            ]
        },
        {
            question: "What is your preferred clothing style?",
            options: [
                { text: "Minimalist, crisp, and always linen or cotton.", family: 'fresh-clean' },
                { text: "Rugged, leather-accented, and earthy tones.", family: 'woody-earthy' },
                { text: "Velvet, deep colors, and layered textures.", family: 'spicy-warm' },
                { text: "Bright, airy, and bohemian floral prints.", family: 'floral-herbal' }
            ]
        },
        {
            question: "If you were to bake something, what would it be?",
            options: [
                { text: "Lemon meringue pie or simple, unflavored bread.", family: 'fresh-clean' },
                { text: "Rich chocolate cake with nuts and espresso.", family: 'woody-earthy' },
                { text: "Pumpkin spice bread or gingerbread cookies.", family: 'spicy-warm' },
                { text: "A bright berry tart or peach cobbler.", family: 'fruity-sweet' }
            ]
        },
        {
            question: "What type of vacation destination appeals most?",
            options: [
                { text: "The breezy, open coastline.", family: 'fresh-clean' },
                { text: "An autumn trip to the mountains.", family: 'woody-earthy' },
                { text: "A bustling, exotic marketplace abroad.", family: 'spicy-warm' },
                { text: "A vibrant garden or orchard estate.", family: 'fruity-sweet' }
            ]
        }
    ];

    // --- Logic Functions ---

    /**
     * Renders the current question and updates the progress.
     */
    function renderQuestion() {
        if (currentQuestionIndex >= quizData.length) {
            showResults();
            return;
        }

        const currentQuestion = quizData[currentQuestionIndex];
        questionContainer.innerHTML = ''; // Clear previous question

        const questionHtml = `
            <h2 class="text-3xl font-playfair text-charcoal mb-8 text-center">${currentQuestion.question}</h2>
            <div class="space-y-4">
                ${currentQuestion.options.map((option, index) => `
                    <button data-family="${option.family}" 
                            class="quiz-option w-full p-4 bg-white border-2 border-stone/30 rounded-lg text-lg text-charcoal text-left hover:border-burnt-orange hover:shadow-md transition duration-200">
                        ${option.text}
                    </button>
                `).join('')}
            </div>
        `;
        questionContainer.innerHTML = questionHtml;

        // Update progress text
        progressText.textContent = `Question ${currentQuestionIndex + 1} of ${quizData.length}`;
        
        // Attach listeners to new options
        document.querySelectorAll('.quiz-option').forEach(button => {
            button.addEventListener('click', handleAnswer);
        });
    }

    /**
     * Handles the user clicking an answer option.
     */
    function handleAnswer(e) {
        const familyVoted = e.currentTarget.dataset.family;
        
        // Update score
        if (score[familyVoted] !== undefined) {
            score[familyVoted] += 1;
        }

        // Move to the next question
        currentQuestionIndex++;
        renderQuestion();
    }

    /**
     * Determines the final result and updates the UI.
     */
    function showResults() {
        quizContainer.classList.add('hidden');
        resultContainer.classList.remove('hidden');

        // Find the family with the highest score
        let topFamily = 'fresh-clean';
        let maxScore = -1;

        for (const family in score) {
            if (score[family] > maxScore) {
                maxScore = score[family];
                topFamily = family;
            }
        }

        // --- Result Mapping ---
        const resultsMap = {
            'fresh-clean': {
                name: 'Fresh & Clean',
                description: 'You prefer light, airy, and revitalizing scents. Notes like cotton, ocean mist, and crisp citrus will bring you peace and clarity.',
                linkText: 'Explore Clean & Fresh Scents'
            },
            'woody-earthy': {
                name: 'Woody & Earthy',
                description: 'You are drawn to rich, grounding, and masculine notes. Scents of sandalwood, cedar, vetiver, and leather provide comfort and depth.',
                linkText: 'Explore Woody & Earthy Scents'
            },
            'spicy-warm': {
                name: 'Spicy & Warm',
                description: 'Your ideal scent is rich, comforting, and nostalgic. Look for notes of cinnamon, clove, ginger, vanilla, and pumpkin spice.',
                linkText: 'Explore Spicy & Warm Scents'
            },
            'fruity-sweet': {
                name: 'Fruity & Sweet',
                description: 'You enjoy vibrant, uplifting, and lively fragrances. Scents like tropical coconut, ripe berry, melon, and sweet sugar energize your space.',
                linkText: 'Explore Fruity & Sweet Scents'
            },
            'floral-herbal': {
                name: 'Floral & Herbal',
                description: 'You are a lover of nature and gentle, soothing aromas. Notes of lavender, rose, jasmine, and chamomile create a calming, natural environment.',
                linkText: 'Explore Floral & Herbal Scents'
            }
        };

        const result = resultsMap[topFamily];

        // Update results display
        resultHeading.textContent = `Your Scent Match: ${result.name}`;
        resultDescription.textContent = result.description;
        resultLink.href = `/shop/?family=${topFamily}`; // Link to the filtered shop page
        resultLink.textContent = result.linkText;
    }
    
    /**
     * Resets the quiz state and starts over.
     */
    function resetQuiz() {
        currentQuestionIndex = 0;
        for (const family in score) {
            score[family] = 0;
        }
        resultContainer.classList.add('hidden');
        quizContainer.classList.remove('hidden');
        renderQuestion();
    }


    // --- Initialization ---
    document.addEventListener('DOMContentLoaded', () => {
        // Attach listener for the restart button
        document.getElementById('restart-button').addEventListener('click', resetQuiz);
        
        // Start the quiz
        renderQuestion();
    });

</script>

<main class="container mx-auto px-4 py-12 min-h-screen">
    
    <header class="max-w-3xl mx-auto text-center mb-12">
        <p class="text-sm font-semibold uppercase tracking-wider text-burnt-orange mb-3">Discovery Tool</p>
        <h1 class="text-5xl font-playfair text-charcoal mb-4">
            The Southern Sense Scent Quiz
        </h1>
        <p class="text-lg text-stone leading-relaxed">
            Answer five simple questions to discover the perfect fragrance family tailored to your personality and space.
        </p>
    </header>

    <section id="quiz-container" class="max-w-2xl mx-auto p-8 bg-parchment rounded-lg shadow-xl">
        
        <div class="mb-8 flex justify-between items-center border-b pb-4">
            <p id="progress-text" class="text-charcoal font-semibold"></p>
            <button id="restart-button" class="text-sm text-stone hover:text-burnt-orange transition">Restart Quiz</button>
        </div>
        
        <div id="question-container">
            </div>
    </section>

    <section id="result-container" class="max-w-3xl mx-auto text-center py-16 hidden">
        <h2 class="text-5xl font-playfair text-burnt-orange mb-4" id="result-heading">
            Your Scent Match: Loading...
        </h2>
        <p class="text-xl text-stone leading-relaxed mb-8" id="result-description">
            Your perfect fragrance family is being calculated based on your preferences.
        </p>
        
        <a id="result-link" href="/shop/" 
           class="px-8 py-4 bg-charcoal text-parchment font-bold text-lg rounded-lg shadow-xl hover:bg-stone transition duration-300">
            Explore Scents
        </a>
        
        <div class="mt-8">
            <button id="restart-button" class="text-sm text-stone hover:text-burnt-orange transition">
                Take the quiz again
            </button>
        </div>
    </section>

</main>